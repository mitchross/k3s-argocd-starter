configs:
  cm:
    create: true
    application.resourceTrackingMethod: "annotation+label"
    kustomize.buildOptions: "--enable-helm"
    configManagementPlugins: |
      - name: kustomize-with-helm
        generate:
          command: ["sh", "-c"]
          args: ["kustomize build"]
      - name: kustomize-with-helm-init
        init:
          command: ["sh", "-c"]
          args: ["helm dependency build || true"]
        generate:
          command: ["sh", "-c"]
          args: ["helm template . --name-template release-name --include-crds > helm-template.yaml && kustomize build"]

repoServer:
  extraContainers:
    - name: helm
      image: alpine/helm:3.11.1
      command: ["/bin/sh", "-c"]
      args:
        - "helm repo add stable https://charts.helm.sh/stable && helm repo update && while true; do sleep 100; done"
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
  volumes:
    - name: custom-tools
      emptyDir: {}
  volumeMounts:
    - mountPath: /custom-tools
      name: custom-tools

  params:
    server.insecure: true

crds:
  install: true
  keep: false

controller:
  resources:
    requests:
      cpu: 100m
      memory: 700Mi
    limits:
      cpu: 4000m
      memory: 2Gi

dex:
  resources:
    requests:
      cpu: 20m
      memory: 64Mi
    limits:
      cpu: 1000m
      memory: 256Mi

redis:
  resources:
    requests:
      cpu: 100m
      memory: 64Mi
    limits:
      cpu: 2000m
      memory: 128Mi

server:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 4000m
      memory: 256Mi

repoServer:
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 4000m
      memory: 1024Mi

applicationSet:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 1000m
      memory: 512Mi